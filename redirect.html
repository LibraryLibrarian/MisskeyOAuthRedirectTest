<!DOCTYPE html>
<html>
<head>
    <title>Redirecting...</title>
</head>
<body>
    <script type="text/javascript">
        function getQueryParams() {
            const params = {};
            const queryString = window.location.search.substring(1);
            const regex = /([^&=]+)=([^&]*)/g;
            let m;
            while (m = regex.exec(queryString)) {
                params[decodeURIComponent(m[1])] = decodeURIComponent(m[2]);
            }
            return params;
        }

        const params = getQueryParams();
        const authCode = params["code"];
        const state = params["state"];
        const redirectUri = `misskey-authtest://redirect?code=${authCode}&state=${state}`;
        window.location.href = redirectUri;
    </script>
    <p>Redirecting to the app...</p>
</body>
</html>